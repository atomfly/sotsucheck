# ğŸ“‹ æŠ€è¡“ä»•æ§˜æ›¸ - å’æ¥­ç ”ç©¶é€²æ—ãƒã‚§ãƒƒã‚«ãƒ¼

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
Chromeæ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦å®Ÿè£…ã•ã‚ŒãŸã€ç ”ç©¶é€²æ—ã®è‡ªå‹•åˆ†æã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Chrome Extension                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Background Service Worker (background.js)                     â”‚
â”‚  â”œâ”€ ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†                                          â”‚
â”‚  â”œâ”€ å­¦ç”ŸIDç®¡ç†                                                   â”‚
â”‚  â”œâ”€ URLè¨­å®šãƒã‚§ãƒƒã‚¯                                              â”‚
â”‚  â”œâ”€ å‹•çš„ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ³¨å…¥                                           â”‚
â”‚  â””â”€ ãƒšãƒ¼ã‚¸èµ·å‹•                                                   â”‚
â”‚                           â”‚                                     â”‚
â”‚  Configuration (config.js)                                     â”‚
â”‚  â”œâ”€ URLè¨­å®šç®¡ç†                                                 â”‚
â”‚  â”œâ”€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®šæ•°                                         â”‚
â”‚  â””â”€ UIè¨­å®š                                                      â”‚
â”‚                           â”‚                                     â”‚
â”‚  Content Injection (execute.js)                                â”‚
â”‚  â”œâ”€ CSPå›é¿                                                     â”‚
â”‚  â”œâ”€ ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ³¨å…¥                                               â”‚
â”‚  â””â”€ DOMæ“ä½œ                                                     â”‚
â”‚                           â”‚                                     â”‚
â”‚  Analysis Engine (analysis.js)                                 â”‚
â”‚  â”œâ”€ APIé€šä¿¡                                                     â”‚
â”‚  â”œâ”€ ãƒ‡ãƒ¼ã‚¿åˆ†æ                                                   â”‚
â”‚  â”œâ”€ UIç”Ÿæˆ                                                      â”‚
â”‚  â”œâ”€ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³                                             â”‚
â”‚  â””â”€ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†                                                 â”‚
â”‚                           â”‚                                     â”‚
â”‚  Options Page (options.html/js)                                â”‚
â”‚  â”œâ”€ è¨­å®šä¿å­˜                                                     â”‚
â”‚  â””â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **è¨€èª**: JavaScript (ES6+)
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Chrome Extensions API (Manifest V3)
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: jQuery 3.6.1
- **ãƒ‡ãƒ¼ã‚¿é€šä¿¡**: jQuery Ajax
- **UI**: Vanilla CSS + JavaScript
- **è¨­å®šç®¡ç†**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹è¨­å®š

## ğŸ› ï¸ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. Manifest (manifest.json)

```json
{
  "manifest_version": 3,
  "name": "å’æ¥­ç ”ç©¶ é€²æ—ãƒã‚§ãƒƒã‚«ãƒ¼",
  "version": "2.0",
  "permissions": [
    "activeTab",        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
    "scripting",        // å‹•çš„ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ³¨å…¥
    "storage"           // è¨­å®šãƒ‡ãƒ¼ã‚¿ä¿å­˜
  ],
  "host_permissions": [
    "*://*/*"           // å…¨ã‚µã‚¤ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¨©é™
  ],
  "background": {
    "service_worker": "background.js"
  },
  "web_accessible_resources": [
    {
      "resources": ["analysis.js", "config.js"],
      "matches": ["<all_urls>"]
    }
  ]
}
```

**è¨­è¨ˆä¸Šã®ç‰¹å¾´**:
- content_scriptsã‚’ä½¿ç”¨ã›ãšã€å‹•çš„æ³¨å…¥æ–¹å¼ã‚’æ¡ç”¨
- æ±ç”¨çš„ãªhost_permissionsã§æŸ”è»ŸãªURLå¯¾å¿œ
- æœ€å°é™ã®æ¨©é™ã§æœ€å¤§é™ã®æ©Ÿèƒ½ã‚’å®Ÿç¾

### 2. Configuration System (config.js)

```javascript
// è¨­å®šã‚·ã‚¹ãƒ†ãƒ ã®ä¸­æ ¸
const CONFIG = {
  // Base URL (è¦è¨­å®š)
  BASE_URL: '', // é‹ç”¨æ™‚ã«å®Ÿéš›ã®URLã‚’è¨­å®š
  
  // API endpoints
  ENDPOINTS: {
    REPORT_PAGE: '/report.html',
    API_MEMBER: '/api/lab/member'
  },
  
  // Application constants
  RULES: {
    REQUIRED_REPORTS: 123,    // å¿…è¦å ±å‘Šæ•°
    ALLOWED_DAYS_OFF: 31,     // è¨±å¯ä¼‘ã¿æ—¥æ•°
    START_YEAR: 2025,         // é–‹å§‹å¹´
    START_MONTH: 4,           // é–‹å§‹æœˆ
    START_DAY: 10,            // é–‹å§‹æ—¥
    DEADLINE_HOUR: 9,         // ç· åˆ‡æ™‚åˆ»
    TOTAL_WEEKDAYS: 154       // ç·å¹³æ—¥æ•°
  },
  
  // UI constants
  COLORS: {
    SUCCESS: '#16a34a',       // æˆåŠŸ
    WARNING: '#d97706',       // è­¦å‘Š
    ERROR: '#dc2626',         // ã‚¨ãƒ©ãƒ¼
    INFO: '#3b82f6',          // æƒ…å ±
    NEUTRAL: '#6b7280'        // ä¸­ç«‹
  }
};
```

**è²¬å‹™**:
- ä¸€å…ƒçš„ãªè¨­å®šç®¡ç†
- URLç§˜åŒ¿åŒ–ã®å®Ÿç¾
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®šæ•°ã®ç®¡ç†
- ç’°å¢ƒå›ºæœ‰è¨­å®šã®åˆ†é›¢

### 3. Background Service Worker (background.js)

```javascript
// å‹•çš„æ³¨å…¥ã‚·ã‚¹ãƒ†ãƒ 
importScripts('config.js');

chrome.action.onClicked.addListener(async (tab) => {
  chrome.storage.sync.get("studentId", async ({ studentId }) => {
    if (studentId) {
      // URLè¨­å®šãƒã‚§ãƒƒã‚¯
      if (!CONFIG.BASE_URL) {
        alert('URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚config.jsã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        return;
      }
      
      // ãƒšãƒ¼ã‚¸ã‚’é–‹ãã€å‹•çš„ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ³¨å…¥
      const url = `${CONFIG.BASE_URL}${CONFIG.ENDPOINTS.REPORT_PAGE}?id=${studentId}`;
      const newTab = await chrome.tabs.create({ url: url });
      
      // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº†å¾Œã®æ³¨å…¥å‡¦ç†
      chrome.tabs.onUpdated.addListener(function listener(tabId, info) {
        if (tabId === newTab.id && info.status === 'complete') {
          chrome.tabs.onUpdated.removeListener(listener);
          injectScripts(newTab.id);
        }
      });
    } else {
      chrome.runtime.openOptionsPage();
    }
  });
});

async function injectScripts(tabId) {
  try {
    await chrome.scripting.executeScript({
      target: { tabId: tabId },
      files: ['config.js']
    });
    await chrome.scripting.executeScript({
      target: { tabId: tabId },
      files: ['execute.js']
    });
  } catch (error) {
    console.error('ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ³¨å…¥ã‚¨ãƒ©ãƒ¼:', error);
  }
}
```

**è²¬å‹™**:
- æ‹¡å¼µæ©Ÿèƒ½ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
- å­¦ç”ŸIDå­˜åœ¨ãƒã‚§ãƒƒã‚¯
- URLè¨­å®šçŠ¶æ…‹ã®æ¤œè¨¼
- å‹•çš„ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ³¨å…¥ã®ç®¡ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 4. Content Injection (execute.js)

```javascript
// CSPåˆ¶é™ã‚’å›é¿ã™ã‚‹ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ³¨å…¥
function injectAnalysisScript() {
  const script = document.createElement('script');
  script.src = chrome.runtime.getURL('analysis.js');
  script.onload = function() {
    console.log('analysis.jsãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
    script.remove(); // ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
  };
  script.onerror = function() {
    console.error('analysis.jsã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    alert('é€²æ—ãƒã‚§ãƒƒã‚«ãƒ¼ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
  };
  
  (document.head || document.documentElement).appendChild(script);
}

// DOMæº–å‚™å®Œäº†ã‚’å¾…ã£ã¦å®Ÿè¡Œ
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', injectAnalysisScript);
} else {
  injectAnalysisScript();
}
```

**è²¬å‹™**:
- CSP (Content Security Policy) å›é¿
- åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®‰å…¨ãªæ³¨å…¥
- DOMæº–å‚™å®Œäº†ã®æ¤œçŸ¥
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 5. Analysis Engine (analysis.js)

#### 5.1 ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ 

```javascript
// ä¸¦åˆ—ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ 
async function fetchProgressData(code, startDate, endDate) {
  const requests = [];
  let currentMonth = new Date(startDate);
  
  while (currentMonth <= endDate) {
    requests.push($.post(CONFIG.ENDPOINTS.API_MEMBER, JSON.stringify({
      Code: code,
      Year: currentMonth.getFullYear(),
      Month: currentMonth.getMonth() + 1
    })));
    currentMonth.setMonth(currentMonth.getMonth() + 1);
  }
  
  const results = await Promise.all(requests);
  return results.flatMap(d => d.dates || []);
}
```

#### 5.2 åˆ†æã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```javascript
// æœŸé™åˆ¤å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
function analyzeSubmissionStatus(day, rules) {
  const submitTime = new Date(day.first);
  const deadline = new Date(day.year, day.month - 1, day.day);
  deadline.setDate(deadline.getDate() + 1);
  deadline.setHours(rules.DEADLINE_HOUR, 0, 0, 0);
  
  return {
    isLate: submitTime >= deadline,
    isOnTime: submitTime < deadline,
    isMissing: !day.exists && isWeekday(day.week)
  };
}

// ç‚¹æ•°è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ 
function calculateScores(data, rules) {
  let normal = 0, late = 0, missing = 0;
  
  data.forEach(day => {
    const status = analyzeSubmissionStatus(day, rules);
    if (status.isOnTime) normal++;
    if (status.isLate) late++;
    if (status.isMissing) missing++;
  });
  
  return {
    effectivePoints: normal + (late * 0.5),
    deductionPoints: (late * 0.5) + missing,
    finalScore: Math.max(0, rules.REQUIRED_REPORTS - finalDeduction)
  };
}
```

#### 5.3 UIç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 

```javascript
// å‹•çš„UIç”Ÿæˆ
class DashboardGenerator {
  static createProgressBar(percentage, width = 20) {
    const filled = Math.round(percentage / 100 * width);
    const empty = width - filled;
    return 'â– '.repeat(filled) + 'â–¡'.repeat(empty);
  }
  
  static createDetailsList(items, renderFunction) {
    if (!items?.length) return '';
    return `
      <details>
        <summary>${items.length}ä»¶ã®è©³ç´°ã‚’è¡¨ç¤º</summary>
        <div style="max-height:120px;overflow-y:auto;">
          ${items.map(renderFunction).join('')}
        </div>
      </details>`;
  }
  
  static generateDashboard(analysisResult) {
    return `
      <div class="dashboard-container">
        ${this.createSummarySection(analysisResult)}
        ${this.createDetailsSection(analysisResult)}
        ${this.createSimulatorSection(analysisResult)}
      </div>`;
  }
}
```

#### 5.4 ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

```javascript
// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
class ProgressSimulator {
  constructor(baseData, constraints) {
    this.baseData = baseData;
    this.constraints = constraints;
    this.setupEventListeners();
  }
  
  validateInput(late, missing, vacation) {
    const total = late + missing + vacation;
    if (total > this.constraints.remainingWeekdays) {
      this.adjustLastInput(total - this.constraints.remainingWeekdays);
      return false;
    }
    return true;
  }
  
  calculatePrediction(late, missing, vacation) {
    const additionalDeduction = (late * 0.5) + missing;
    const totalDeduction = this.baseData.deductionPoints + additionalDeduction;
    const futureVacation = this.baseData.remainingVacation - vacation;
    const finalDeduction = Math.max(0, totalDeduction - futureVacation) + 
                          Math.max(0, -futureVacation);
    
    return {
      finalDeduction,
      finalScore: Math.max(0, CONFIG.RULES.REQUIRED_REPORTS - finalDeduction),
      breakdown: {
        current: this.baseData.deductionPoints,
        additional: additionalDeduction,
        total: totalDeduction,
        vacationOffset: futureVacation
      }
    };
  }
}
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒªãƒƒã‚¯
   â†“
2. background.js: å­¦ç”ŸIDãƒã‚§ãƒƒã‚¯
   â†“
3. background.js: URLè¨­å®šãƒã‚§ãƒƒã‚¯
   â†“
4. background.js: æ–°ã—ã„ã‚¿ãƒ–ã§ãƒšãƒ¼ã‚¸ã‚’é–‹ã
   â†“
5. background.js: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº†ã‚’å¾…æ©Ÿ
   â†“
6. background.js: config.jsæ³¨å…¥
   â†“
7. background.js: execute.jsæ³¨å…¥
   â†“
8. execute.js: analysis.jsæ³¨å…¥
   â†“
9. analysis.js: åˆ†æå‡¦ç†é–‹å§‹
```

### 2. åˆ†æå‡¦ç†ãƒ•ãƒ­ãƒ¼
```
1. mainã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¾…æ©Ÿ
   â†“
2. å­¦ç”ŸIDå–å¾—
   â†“
3. æœˆåˆ¥ãƒ‡ãƒ¼ã‚¿ä¸¦åˆ—å–å¾—
   â†“
4. ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ»åˆ†æ
   â†“
5. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UIç”Ÿæˆ
   â†“
6. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼åˆæœŸåŒ–
   â†“
7. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
   â†“
8. åˆæœŸè¡¨ç¤ºå®Œäº†
```

### 3. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›æ¤œçŸ¥
   â†“
2. åˆ¶ç´„æ¤œè¨¼
   â†“
3. è¶…éæ™‚è‡ªå‹•èª¿æ•´
   â†“
4. äºˆæ¸¬è¨ˆç®—å®Ÿè¡Œ
   â†“
5. çµæœUIæ›´æ–°
   â†“
6. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤º
```

## ğŸ¨ UI/UXè¨­è¨ˆ

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

#### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```css
:root {
  --color-success: #16a34a;    /* è‰¯å¥½ãªçŠ¶æ…‹ */
  --color-warning: #d97706;    /* æ³¨æ„ãŒå¿…è¦ */
  --color-error: #dc2626;      /* å•é¡ŒãŒã‚ã‚‹ */
  --color-info: #3b82f6;       /* æƒ…å ±è¡¨ç¤º */
  --color-neutral: #6b7280;    /* ä¸­ç«‹çš„ãªæƒ…å ± */
  --color-bg-primary: #ffffff; /* ä¸»è¦èƒŒæ™¯ */
  --color-bg-secondary: #f3f4f6; /* å‰¯æ¬¡èƒŒæ™¯ */
}
```

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ã‚¹ãƒ†ãƒ 
```css
/* ã‚°ãƒªãƒƒãƒ‰ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
.summary-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1px;
}

.details-content {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1px;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
@media (max-width: 768px) {
  .details-content {
    grid-template-columns: 1fr;
  }
}
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ
```css
/* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
.section {
  border: 2px solid var(--color-neutral-300);
  border-radius: 6px;
  margin-bottom: 15px;
  overflow: hidden;
}

.section__header {
  background: var(--color-bg-secondary);
  padding: 8px 15px;
  font-weight: 600;
  text-align: center;
}

.section__content {
  background: var(--color-bg-primary);
  padding: 15px;
}
```

## ğŸ”§ é–‹ç™ºç’°å¢ƒ

### å¿…è¦ãªãƒ„ãƒ¼ãƒ«
```bash
# åŸºæœ¬é–‹ç™ºç’°å¢ƒ
- Google Chrome (æœ€æ–°ç‰ˆ)
- Visual Studio Code
- Chrome DevTools

# æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½
- JavaScript (ES6) code snippets
- Chrome Extension Developer Tools
```

### ãƒ‡ãƒãƒƒã‚°ç’°å¢ƒ
```javascript
// ãƒ‡ãƒãƒƒã‚°ç”¨è¨­å®š
const DEBUG_MODE = true;

function debugLog(message, data) {
  if (DEBUG_MODE) {
    console.log(`[é€²æ—ãƒã‚§ãƒƒã‚«ãƒ¼] ${message}`, data);
  }
}

// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
function measurePerformance(label, fn) {
  console.time(label);
  const result = fn();
  console.timeEnd(label);
  return result;
}
```

### ãƒ†ã‚¹ãƒˆæ–¹æ³•
```javascript
// å˜ä½“ãƒ†ã‚¹ãƒˆä¾‹
function testCalculateScores() {
  const testData = [
    { exists: true, first: '2025-07-15T08:00:00Z', year: 2025, month: 7, day: 15 },
    { exists: true, first: '2025-07-16T10:00:00Z', year: 2025, month: 7, day: 16 },
    { exists: false, year: 2025, month: 7, day: 17, week: 'Monday' }
  ];
  
  const result = calculateScores(testData, CONFIG.RULES);
  console.assert(result.effectivePoints === 1.5, 'effectivePoints calculation failed');
  console.assert(result.deductionPoints === 1.5, 'deductionPoints calculation failed');
}
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### é–‹ç™ºç‰ˆãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# 1. ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æº–å‚™
cd sotsuken-checker/

# 2. config.jsè¨­å®š
# BASE_URL ã‚’å®Ÿéš›ã®URLã«è¨­å®š

# 3. Chromeæ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦èª­ã¿è¾¼ã¿
# chrome://extensions/ â†’ é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ â†’ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã•ã‚Œã¦ã„ãªã„æ‹¡å¼µæ©Ÿèƒ½ã‚’èª­ã¿è¾¼ã‚€
```

### æœ¬ç•ªç‰ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°
```bash
# 1. æœ¬ç•ªç”¨è¨­å®š
# - console.logå‰Šé™¤
# - ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ¼ãƒ‰å‰Šé™¤
# - æœ€é©åŒ–

# 2. ZIPãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
zip -r sotsuken-checker-v2.0.zip sotsuken-checker/ \
  --exclude "*.git*" "*.DS_Store*" "*node_modules*"

# 3. é…å¸ƒ
# - config.jså†…ã®BASE_URLã‚’ç©ºã«ã—ã¦é…å¸ƒ
# - å®Ÿéš›ã®URLã¯åˆ¥é€”æä¾›
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
```javascript
// æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„
class SecureStorage {
  static encrypt(data) {
    // æœ¬ç•ªç’°å¢ƒã§ã¯é©åˆ‡ãªæš—å·åŒ–ã‚’å®Ÿè£…
    return btoa(JSON.stringify(data));
  }
  
  static decrypt(encryptedData) {
    try {
      return JSON.parse(atob(encryptedData));
    } catch {
      return null;
    }
  }
}

// å…¥åŠ›å€¤æ¤œè¨¼
function validateStudentId(id) {
  return /^[a-zA-Z0-9]{3,20}$/.test(id);
}

// XSSå¯¾ç­–
function sanitizeHTML(str) {
  const temp = document.createElement('div');
  temp.textContent = str;
  return temp.innerHTML;
}
```

### CSPå¯¾å¿œ
```javascript
// Content Security Policy å›é¿æˆ¦ç•¥
// 1. web_accessible_resources ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’å…¬é–‹
// 2. executeScript API ã§å‹•çš„æ³¨å…¥
// 3. inline script ã‚’é¿ã‘ã¦å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨
```

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ãƒ¡ãƒ¢ãƒªç®¡ç†
```javascript
// ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
class ResourceManager {
  constructor() {
    this.listeners = new Map();
    this.timers = new Set();
  }
  
  addListener(element, event, handler) {
    element.addEventListener(event, handler);
    this.listeners.set(element, { event, handler });
  }
  
  cleanup() {
    // ãƒªã‚¹ãƒŠãƒ¼å‰Šé™¤
    this.listeners.forEach((info, element) => {
      element.removeEventListener(info.event, info.handler);
    });
    this.listeners.clear();
    
    // ã‚¿ã‚¤ãƒãƒ¼å‰Šé™¤
    this.timers.forEach(timer => clearInterval(timer));
    this.timers.clear();
  }
}
```

### APIæœ€é©åŒ–
```javascript
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥
class APICache {
  constructor(maxAge = 300000) { // 5åˆ†
    this.cache = new Map();
    this.maxAge = maxAge;
  }
  
  get(key) {
    const item = this.cache.get(key);
    if (item && Date.now() - item.timestamp < this.maxAge) {
      return item.data;
    }
    this.cache.delete(key);
    return null;
  }
  
  set(key, data) {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    });
  }
}
```

## ğŸ› æ—¢çŸ¥ã®å•é¡Œã¨å¯¾ç­–

### 1. éåŒæœŸã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œ
```javascript
// è§£æ±ºç­–: Promiseãƒ™ãƒ¼ã‚¹ã®å¾…æ©Ÿã‚·ã‚¹ãƒ†ãƒ 
async function waitForCondition(checkFn, timeout = 10000) {
  return new Promise((resolve, reject) => {
    const startTime = Date.now();
    const checkInterval = setInterval(() => {
      if (checkFn()) {
        clearInterval(checkInterval);
        resolve();
      } else if (Date.now() - startTime > timeout) {
        clearInterval(checkInterval);
        reject(new Error('Timeout'));
      }
    }, 100);
  });
}
```

### 2. DOMæ“ä½œç«¶åˆ
```javascript
// è§£æ±ºç­–: MutationObserverä½¿ç”¨
class SafeDOMManager {
  constructor() {
    this.observer = new MutationObserver(this.handleMutations.bind(this));
  }
  
  observe(target) {
    this.observer.observe(target, {
      childList: true,
      subtree: true
    });
  }
  
  handleMutations(mutations) {
    mutations.forEach(mutation => {
      if (mutation.type === 'childList') {
        this.reinitializeIfNeeded();
      }
    });
  }
}
```

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```javascript
// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©
window.addEventListener('error', (event) => {
  console.error('é€²æ—ãƒã‚§ãƒƒã‚«ãƒ¼ã‚¨ãƒ©ãƒ¼:', event.error);
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º
  showUserFriendlyError(event.error);
});

window.addEventListener('unhandledrejection', (event) => {
  console.error('æœªå‡¦ç†ã®Promiseæ‹’å¦:', event.reason);
  event.preventDefault();
});
```

## ğŸ“š å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Chrome Extensions API](https://developer.chrome.com/docs/extensions/)
- [Manifest V3 ã‚¬ã‚¤ãƒ‰](https://developer.chrome.com/docs/extensions/mv3/intro/)
- [Content Security Policy](https://developer.mozilla.org/docs/Web/HTTP/CSP)

### é–‹ç™ºãƒªã‚½ãƒ¼ã‚¹
- [MDN Web Docs](https://developer.mozilla.org/)
- [jQuery API Documentation](https://api.jquery.com/)
- [Chrome DevTools](https://developer.chrome.com/docs/devtools/)

### è¨­è¨ˆå‚è€ƒ
- [JavaScript Design Patterns](https://addyosmani.com/resources/essentialjsdesignpatterns/book/)
- [Web Components Best Practices](https://developers.google.com/web/fundamentals/web-components/best-practices)

---

**æŠ€è¡“ä»•æ§˜æ›¸ v2.0**  
**æœ€çµ‚æ›´æ–°**: 2025å¹´7æœˆ22æ—¥  
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Chromeæ‹¡å¼µæ©Ÿèƒ½ v2.0  
**ä½œæˆè€…**: é€²æ—ãƒã‚§ãƒƒã‚«ãƒ¼é–‹ç™ºãƒãƒ¼ãƒ 